<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Wykonane ćwiczenia</title>
        <link rel="stylesheet" href="../style.css" />
    </head>
    <body>
        <main id="exercise1" class="exercise-section">
            <div class="generator">
                <h1 class="generator-title">Generator haseł</h1>
                <div class="generator-container">
                    <div class="control-group">
                        <label for="min-length">Minimalna długość hasła:</label>
                        <input
                            type="number"
                            id="min-length"
                            value="8"
                            min="1"
                        />
                    </div>
                    <div class="control-group">
                        <label for="max-length"
                            >Maksymalna długość hasła:</label
                        >
                        <input
                            type="number"
                            id="max-length"
                            value="16"
                            min="1"
                        />
                    </div>

                    <div class="control-group checkbox">
                        <input type="checkbox" id="include-uppercase" checked />
                        <label for="include-uppercase"
                            >Czy hasło ma zawierać wielkie litery?</label
                        >
                    </div>
                    <div class="control-group checkbox">
                        <input type="checkbox" id="include-special" checked />
                        <label for="include-special"
                            >Czy hasło ma zawierać znaki specjalne?</label
                        >
                    </div>
                    <button id="generate-button" class="password-button">
                        Wygeneruj hasło
                    </button>
                </div>
            </div>
            <a href="../" class="back-link">Powrót do listy ćwiczeń</a>
        </main>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                // 1. Definicja puli znaków
                const LOWERCASE_CHARS = "abcdefghijklmnopqrstuvwxyz";
                const UPPERCASE_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                const NUMBERS = "0123456789";
                const SPECIAL_CHARS = "!@#$%^&*()_-+=<>?/{}[]|";

                // 2. Pobieranie elementów DOM
                const minLengthInput = document.getElementById("min-length");
                const maxLengthInput = document.getElementById("max-length");
                const includeUppercaseCheckbox =
                    document.getElementById("include-uppercase");
                const includeSpecialCheckbox =
                    document.getElementById("include-special");
                const generateButton =
                    document.getElementById("generate-button");

                // 3. Funkcja do generowania hasła
                function generatePassword(
                    minLength,
                    maxLength,
                    includeUppercase,
                    includeSpecial
                ) {
                    // Walidacja długości
                    if (
                        minLength <= 0 ||
                        maxLength <= 0 ||
                        minLength > maxLength
                    ) {
                        return "Błąd: Sprawdź minimalną i maksymalną długość.";
                    }

                    // Określenie puli dostępnych znaków
                    let availableChars = LOWERCASE_CHARS + NUMBERS;

                    if (includeUppercase) {
                        availableChars += UPPERCASE_CHARS;
                    }

                    if (includeSpecial) {
                        availableChars += SPECIAL_CHARS;
                    }

                    if (availableChars.length === 0) {
                        return "Błąd: Wybierz co najmniej jedną opcję (choć małe litery i cyfry są domyślne).";
                    }

                    // Losowanie długości hasła
                    const length =
                        Math.floor(
                            Math.random() * (maxLength - minLength + 1)
                        ) + minLength;

                    let password = "";

                    // Generowanie hasła
                    for (let i = 0; i < length; i++) {
                        const randomIndex = Math.floor(
                            Math.random() * availableChars.length
                        );
                        password += availableChars[randomIndex];
                    }
                    return password;
                }

                // 4. Obsługa zdarzenia kliknięcia
                generateButton.addEventListener("click", () => {
                    // Pobierz aktualne wartości
                    const minLength = parseInt(minLengthInput.value);
                    const maxLength = parseInt(maxLengthInput.value);
                    const includeUppercase = includeUppercaseCheckbox.checked;
                    const includeSpecial = includeSpecialCheckbox.checked;

                    // Wygeneruj i wyświetl hasło
                    const newPassword = generatePassword(
                        minLength,
                        maxLength,
                        includeUppercase,
                        includeSpecial
                    );

                    alert(newPassword);
                });
            });
        </script>
    </body>
</html>
